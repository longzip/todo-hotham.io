"use strict";(self["webpackChunktodo_buudienxatulap"]=self["webpackChunktodo_buudienxatulap"]||[]).push([[313],{4392:(t,e,a)=>{a.d(e,{Z:()=>D});var n=a(9835),i=a(6970);const o=(0,n.Uk)(" Mã hộ:"),h=["href"],s=["href"],l=["href"],c=(0,n.Uk)("đ "),r=(0,n._)("br",null,null,-1),u=(0,n._)("br",null,null,-1);function g(t,e,a,g,y,m){const p=(0,n.up)("q-icon"),d=(0,n.up)("q-item-label"),T=(0,n.up)("q-item-section"),w=(0,n.up)("q-item");return(0,n.wg)(),(0,n.j4)(w,{class:(0,i.C_)({"bg-warning":a.bhyt.coTheUuTienCaoHon,"bg-warning":1==a.bhyt.coTheUuTienCaoHon,"bg-positive":m.getDateDiff(a.bhyt.denNgayDt)>30,"bg-blue-grey-3":m.getDateDiff(a.bhyt.denNgayDt)<1})},{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:(0,i.C_)(1==a.bhyt.gioiTinh?"text-pink":"text-primary"),name:1==a.bhyt.gioiTinh?"female":"male"},null,8,["class","name"]),(0,n.Uk)((0,i.zw)(a.bhyt.hoTen||a.bhyt.hoVaTen)+" "+(0,i.zw)(a.bhyt.ngaySinhDt||a.bhyt.ngayThangNamSinh)+" ",1),(0,n.Wm)(p,{onClick:e[0]||(e[0]=t=>m.xacNhanLoaiBo(a.bhyt)),name:1==a.bhyt.disabled?"do_not_disturb_on":"delete_forever",color:1==a.bhyt.disabled?"red":"gray"},null,8,["name","color"]),(0,n.Wm)(p,{class:"q-ml-sm",onClick:e[1]||(e[1]=e=>t.dongBoDuLieu(a.bhyt.soTheBhyt?a.bhyt.soTheBhyt:a.bhyt.maSoBhxh||a.bhyt.maSoBHXH)),name:"update",color:"blue"})])),_:1}),(0,n.Wm)(d,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(a.bhyt.diaChiLh),1)])),_:1}),(0,n.Wm)(d,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[o,(0,n._)("a",{target:"_blank",href:`/#/ho-gia-dinh/${a.bhyt.maHoGd}`},(0,i.zw)(a.bhyt.maHoGd),9,h),(0,n.Uk)(" "+(0,i.zw)(a.bhyt.mqhChuHo),1)])),_:1}),(0,n.Wm)(d,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Số CMND: "+(0,i.zw)(a.bhyt.soCmnd),1)])),_:1}),(0,n.Wm)(d,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n._)("a",{target:"_blank",href:`https://thambuudien.ga/tra-thoi-han-bao-hiem-y-te?q=${a.bhyt.soTheBhyt?a.bhyt.soTheBhyt:a.bhyt.maSoBhxh||a.bhyt.maSoBHXH}`},(0,i.zw)(a.bhyt.soTheBhyt?a.bhyt.soTheBhyt:a.bhyt.maSoBhxh||a.bhyt.maSoBHXH),9,s),(0,n.Wm)(p,{class:"q-ml-md",onClick:e[2]||(e[2]=t=>m.copyTextToClipboard(a.bhyt.soTheBhyt?a.bhyt.soTheBhyt:a.bhyt.maSoBhxh||a.bhyt.maSoBHXH)),name:"content_copy"}),(0,n.Wm)(p,{class:"q-ml-md",onClick:e[3]||(e[3]=t=>m.copyUrlToClipboard(a.bhyt)),name:"share"}),(0,n.Wm)(p,{class:"q-ml-md",onClick:e[4]||(e[4]=t=>m.copyBHXHToClipboard(a.bhyt.maSoBhxh||a.bhyt.maSoBHXH)),name:"share"})])),_:1}),(0,n.Wm)(d,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(a.bhyt.maKCB),1)])),_:1}),(0,n.Wm)(d,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)("5 năm:"+(0,i.zw)(a.bhyt.ngay5Nam||a.bhyt.trangThaiHoSoName||a.bhyt.moTa),1)])),_:1}),(0,n.Wm)(d,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n._)("a",{href:`tel:${a.bhyt.soDienThoai}`},(0,i.zw)(a.bhyt.soDienThoai),9,l)])),_:1})])),_:1}),(0,n.Wm)(T,{side:"",top:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(m.getDateDiff(a.bhyt.denNgayDt))+" ngày",1)])),_:1}),(0,n.Wm)(d,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)("Đến:"+(0,i.zw)(a.bhyt.denNgayDt||a.bhyt.ngayDenHan),1)])),_:1}),(0,n.Wm)(d,{caption:""},{default:(0,n.w5)((()=>[c,(0,n._)("strong",null,(0,i.zw)(a.bhyt.tongTien||a.bhyt.soTienThu||a.bhyt.soPhaiDong?parseInt(a.bhyt.tongTien||a.bhyt.soTienThu||a.bhyt.soPhaiDong).toLocaleString():"0"),1)])),_:1}),(0,n.Wm)(p,{onClick:e[5]||(e[5]=t=>m.xacNhanTheoDoi(a.bhyt)),name:"star",color:1==a.bhyt.completed?"yellow":"gray"},null,8,["color"]),(0,n.Wm)(d,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(a.bhyt.ngayLap||a.bhyt.ngayBienLai||new Date(a.bhyt.updated_at).toLocaleString()),1),r,(0,n.Uk)(" "+(0,i.zw)(a.bhyt.soBienLai?`Số: ${a.bhyt.soBienLai}`:a.bhyt.ghiChu),1),u,(0,n.Uk)(" "+(0,i.zw)(a.bhyt.userName),1)])),_:1})])),_:1})])),_:1},8,["class"])}a(702);var y=a(3100),m=a(4170),p=a(6827);const d={props:["bhyt"],methods:{...(0,y.nv)("bhyts",["loaiBo","theoDoi","dongBoDuLieu","getTraCuuThongTinBHXHTN"]),xacNhanLoaiBo(t){t.maSoBhxh||(t.maSoBhxh=t.maSoBHXH),this.$q.dialog({title:"Confirm",message:"Bạn có muốn loại bỏ?",ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((()=>{this.loaiBo(t)}))},xacNhanTheoDoi(t){t.maSoBhxh||(t.maSoBhxh=t.maSoBHXH),this.$q.dialog({title:"Confirm",message:"Bạn có muốn theo dõi?",ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((()=>{this.theoDoi(t)}))},getDateDiff(t){return t?m.ZP.getDateDiff(new Date(t),new Date,"days"):""},async copyBHXHToClipboard(t){const e=await this.getTraCuuThongTinBHXHTN({maSoBhxh:t});if(!e)return p.Z.create({type:"negative",message:"Không tham gia BHXH Tự Nguyện"}),null;navigator.clipboard.writeText(`Xin chào! Mã sổ BHXH: ${e.maSoBhxh}, Họ tên: ${e.hoTen}, Ngày sinh: **/**/${new Date(e.ngaySinhDt).getFullYear()}; Đóng BHXH TN tháng bắt đầu ${e.thangBd.slice(4)}/${e.thangBd.slice(0,4)} số tiền ${parseInt(e.tienNldPhaiNop).toLocaleString()}đ/${e.phuongThucDong}; Tên đơn vị tham gia: ${e.tenDonVi} ngày đăng ký ${e.ngayDk} mức đóng ${e.mucDong} (tiền ngân sách hỗ trợ ${e.tienNsnnHoTro}). Tham khảo https://blog.hotham.vn/thoi-han-nop-tien-tiep-bao-hiem-xa-hoi-tu-nguyen/`).then((function(){p.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){p.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))},copyUrlToClipboard(t){const[e,a,n]=(new Date).toISOString().slice(0,10).split("-");navigator.clipboard.writeText(new Date(t.denNgayDt)<new Date(e,parseInt(a)+1,0)?`\n          Xin chào! Mã thẻ: ${t.soTheBhyt?t.soTheBhyt:t.maSoBhxh||t.maSoBHXH}, Họ tên: ${t.hoTen||t.hoVaTen}, Ngày sinh: **/**/${new Date(t.ngaySinhDt).getFullYear()}; Hạn thẻ: ${new Date(t.tuNgayDt).toLocaleDateString()} - ${new Date(t.denNgayDt).toLocaleDateString()} (còn ${this.getDateDiff(t.denNgayDt)} ngày); Thời điểm đủ 5 năm liên tục: ${t.ngay5Nam.slice(6,8)}/${t.ngay5Nam.slice(4,6)}/${t.ngay5Nam.slice(0,4)}.\n          Xem thêm Mức đóng bảo hiểm y tế hộ gia đình năm 2023 tại https://blog.hotham.vn/muc-dong-bao-hiem-y-te-ho-gia-dinh-nam-2023/ .  Người dân khi muốn gia hạn thẻ bảo hiểm y tế (BHYT) hộ gia đình có giảm trừ mức đóng chỉ cần đến trực tiếp Điểm thu BHXH, BHYT Bưu điện xã Tự Lập (cạnh trạm y tế xã) gặp chị Hồ Thị Thắm (thay anh Lập nghỉ) thông báo số BHXH (cung cấp mã thẻ BHYT cũ), nộp tiền đóng BHYT.`:`\n          Thẻ đã được gia hạn! Mã thẻ: ${t.soTheBhyt?t.soTheBhyt:t.maSoBhxh||t.maSoBHXH}, Họ tên: ${t.hoTen||t.hoVaTen}, Ngày sinh: **/**/${new Date(t.ngaySinhDt).getFullYear()}; Hạn thẻ: ${new Date(t.tuNgayDt).toLocaleDateString()} - ${new Date(t.denNgayDt).toLocaleDateString()} (còn ${this.getDateDiff(t.denNgayDt)} ngày); Thời điểm đủ 5 năm liên tục: ${t.ngay5Nam.slice(6,8)}/${t.ngay5Nam.slice(4,6)}/${t.ngay5Nam.slice(0,4)}.\n          Xem thêm Những cách theo dõi quá trình tham gia và giá trị sử dụng thẻ BHYT, nhằm đảm bảo quyền lợi liên tục tại https://blog.hotham.vn/nhung-cach-theo-doi-qua-trinh-tham-gia-va-gia-tri-su-dung-the-bhyt-nham-dam-bao-quyen-loi-lien-tuc/ .  Để biết thêm thông tin, người dân có thể trực tiếp đến Điểm thu BHXH, BHYT Bưu điện xã Tự Lập (cạnh trạm y tế xã) gặp chị Hồ Thị Thắm (thay anh Lập nghỉ), hoặc liên hệ đến Tổng đài Chăm sóc khách hàng của BHXH Việt Nam theo số 1900 9068 để được hướng dẫn, hỗ trợ./.`).then((function(){p.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){p.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))},copyTextToClipboard(t){navigator.clipboard.writeText(t.toString().slice(t.length-10)).then((function(){p.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){p.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))}},filters:{tien:function(t){return t?parseInt(t).toLocaleString():"0đ"}}};var T=a(1639),w=a(490),B=a(1233),b=a(3115),f=a(2857),S=a(9984),k=a.n(S);const H=(0,T.Z)(d,[["render",g]]),D=H;k()(d,"components",{QItem:w.Z,QItemSection:B.Z,QItemLabel:b.Z,QIcon:f.Z})},1257:(t,e,a)=>{a.r(e),a.d(e,{default:()=>V});var n=a(9835),i=a(6970),o=a(1957);const h={class:"inline bg-orange-4 rounded-borders cursor-pointer"},s={class:"fit flex flex-center text-center non-selectable q-pa-md"},l=(0,n._)("br",null,null,-1),c=(0,n.Uk)("(Bấm vào đây và lựa chọn) "),r=(0,n.Uk)("Tìm theo năm sinh"),u=(0,n.Uk)("Tìm tất cả"),g=(0,n.Uk)("Tái tục 1 tháng"),y=(0,n.Uk)("Tái tục 2 tháng"),m=(0,n.Uk)("Đã hết hạn"),p=(0,n.Uk)("Đã liên hệ"),d=(0,n.Uk)("Đánh dấu sao"),T=(0,n.Uk)("Hồ sơ chưa xử lý"),w=(0,n.Uk)("Hồ sơ đã nộp"),B=(0,n.Uk)("Hồ sơ đã xử lý"),b=(0,n.Uk)("Báo cáo Chi Tiết Giao Dịch"),f=(0,n.Uk)("In C17"),S=(0,n.Uk)("Tái tục BHXH"),k=(0,n.Uk)("Tải dữ liệu tái tục mới nhất"),H=(0,n.Uk)("Tải dữ liệu tái tục 2021 từ SSM"),D=(0,n.Uk)("Tải dữ liệu tái tục 2022 từ SSM"),C=(0,n.Uk)("Copy tất cả mã số BHXH"),I=(0,n.Uk)("Copy tất cả họ tên"),_=(0,n.Uk)("Copy tất cả số điện thoại"),x={class:"q-gutter-y-md column"};function v(t,e,a,v,L,N){const $=(0,n.up)("q-item-section"),X=(0,n.up)("q-item"),W=(0,n.up)("q-list"),U=(0,n.up)("q-menu"),j=(0,n.up)("q-banner"),O=(0,n.up)("q-icon"),A=(0,n.up)("q-input"),P=(0,n.up)("ThongTinTheBHYT"),Z=(0,n.up)("q-separator"),q=(0,n.up)("q-page"),Y=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(q,{class:""},{default:(0,n.w5)((()=>[(0,n.Wm)(j,{"inline-actions":"",class:(0,i.C_)(["bg-orange-4","list-header text-white text-center"])},{default:(0,n.w5)((()=>[(0,n._)("div",h,[(0,n._)("div",s,[(0,n.Uk)(" Tra cứu "+(0,i.zw)(t.bhyts.length)+"/"+(0,i.zw)(parseInt(t.tongTien).toLocaleString())+"đ!",1),l,c]),(0,n.Wm)(U,{"touch-position":""},{default:(0,n.w5)((()=>[(0,n.Wm)(W,{style:{"min-width":"100px"}},{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadBhytByNamSinh},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[r])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadBhytByName},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[u])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:e[0]||(e[0]=t=>N.loadBhyts({thang:1}))},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[g])),_:1})])),_:1})),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:e[1]||(e[1]=t=>N.loadBhyts({thang:2}))},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[y])),_:1})])),_:1})),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadBhytsHetHan},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[m])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadBhytsDisable},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[p])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadBhytsCompleted},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[d])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadHoSoChuaXuLy},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[T])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadHoSoDaNopBD},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[w])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadHoSoDaXuLy},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[B])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadBaoCaoChiTietGiaoDich},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[b])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.inC17},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[f])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadTaiTucBHXH},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[S])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadBhytsTaiTuc2020},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[k])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadBhytsTaiTuc2021},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[H])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.loadBhytsTaiTuc2022},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[D])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.copyMaSoBhxhToClipboard},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[C])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:t.copyHoTenToClipboard},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[I])),_:1})])),_:1},8,["onClick"])),[[Y]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(X,{clickable:"",onClick:N.copySoDienThoaiToClipboard},{default:(0,n.w5)((()=>[(0,n.Wm)($,null,{default:(0,n.w5)((()=>[_])),_:1})])),_:1},8,["onClick"])),[[Y]])])),_:1})])),_:1})])])),_:1}),(0,n._)("div",x,[(0,n.Wm)(A,{outlined:"",modelValue:L.searchText,"onUpdate:modelValue":e[3]||(e[3]=t=>L.searchText=t),onKeyup:e[4]||(e[4]=(0,o.D2)((t=>N.timKiem(L.searchText)),["enter"])),dense:""},{append:(0,n.w5)((()=>[""!==L.searchText?((0,n.wg)(),(0,n.j4)(O,{key:0,name:"close",onClick:e[2]||(e[2]=t=>L.searchText=""),class:"cursor-pointer"})):(0,n.kq)("",!0),(0,n.Wm)(O,{name:"search"})])),_:1},8,["modelValue"])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.bhyts,(t=>((0,n.wg)(),(0,n.j4)(W,{key:t.id},{default:(0,n.w5)((()=>[(0,n.Wm)(P,{bhyt:t},null,8,["bhyt"]),(0,n.Wm)(Z,{spaced:"",inset:""})])),_:2},1024)))),128))])),_:1})}a(6822),a(702),a(4641),a(3269);var L=a(3100),N=a(4392),$=a(6950),X=a(8359),W=a(6827);const U={components:{ThongTinTheBHYT:N.Z},data(){return{searchText:""}},computed:{...(0,L.Se)("bhyts",["bhyts","tongTien"]),...(0,L.rn)("store",["userDetails"])},methods:{...(0,L.nv)("bhyts",["getBhyts","resetBhyt","traCuuBhyts","updateBhyt","resetBhyt","hoSoDaXuLy","dongBoDuLieu","traCuuTheoTen","getDanhSachKhachHangTaiTuc","copyHoTenToClipboard"]),sleep(t){return new Promise((e=>setTimeout(e,t)))},async loadTaiTucBHXH(){this.getDanhSachKhachHangTaiTuc({filterItems:[],maxResultCount:500,skipCount:0,mangLuoiId:4580,tuThang:"2023-03-01 00:00:00",denThang:"2023-04-01 00:00:00",type:-1,loaiDichVu:0})},async fetchAPIByName(t){this.key||await this.getAuth();const e={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},{maXa:a}=this.userDetails,n=`https://ssm-api.vnpost.vn/api/services/app/TraCuu/TraCuuMaSoBHXH?maTinh=01&maHuyen=250&maXa=${a}&hoTen=${t}&isCoDau=true&`,i=await fetch(n,{method:"GET",headers:e}),o=await i.json();if(o.errors)throw console.error(o.errors),new Error("Failed to fetch API");return o.result.value},async fetchAPIByMaSoBhxh(t){this.key||await this.getAuth();const e={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},a=`https://ssm-api.vnpost.vn/api/services/app/TraCuu/TraCuuThongTinBHYT?maSoBhxh=${t.slice(t.length-10)}`,n=await fetch(a,{method:"GET",headers:e}),i=await n.json();if(i.errors)throw console.error(i.errors),new Error("Failed to fetch API");return i.result},async fetchAPIHoSoDaXuLy({tuNgay:t,denNgay:e}){const a=parseInt(this.searchText);let n=0;a&&(n=a),this.key||await this.getAuth();const i={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},o="https://ssm-api.vnpost.vn/api/services/app/KeKhai/TraCuuNoGroup",h=new Date,s=h.getFullYear(),l=h.getMonth(),c=await fetch(o,{method:"POST",headers:i,body:JSON.stringify({dateForm:"ngayLap",denNgay:null!==e&&void 0!==e?e:new Date(s,l-n+2,1).toISOString(),filterItems:[],hoSoChuaThuTien:!1,hoSoQuaHan:0,keyMenu:"1",mangLuoiId:parseInt(this.userDetails.mangLuoiId),maxResultCount:5e3,skipCount:0,tuNgay:null!==t&&void 0!==t?t:new Date(s,l-n,1).toISOString()})}),r=await c.json();if(r.errors)throw console.error(r.errors),new Error("Failed to fetch API");return r.result},async fetchAPIHoSoChuaXuLy(){this.key||await this.getAuth();const t={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},e="https://ssm-api.vnpost.vn/api/services/app/KeKhai/TraCuuNoGroup",a=new Date,n=a.getFullYear(),i=a.getMonth(),o=await fetch(e,{method:"POST",headers:t,body:JSON.stringify({dateForm:"ngayLap",denNgay:new Date(n,i+2,1).toISOString(),filterItems:[],hoSoChuaThuTien:!1,hoSoQuaHan:0,keyMenu:"2",mangLuoiId:parseInt(this.userDetails.mangLuoiId),maxResultCount:5e3,skipCount:0,tuNgay:new Date(n,i,1).toISOString()})}),h=await o.json();if(h.errors)throw console.error(h.errors),new Error("Failed to fetch API");return h.result},async fetchAPIBaoCaoChiTietGiaoDich({denThang:t,tuThang:e}){this.key||await this.getAuth();const a={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},n="https://ssm-api.vnpost.vn/api/services/app/BaoCaoTongHopGDThu/BaoCaoChiTietGiaoDich",i=await fetch(n,{method:"POST",headers:a,body:JSON.stringify({denThang:t,filterItems:[],loaiGiaoDich:0,mangLuoiId:parseInt(parseInt(this.userDetails.mangLuoiId)),maxResultCount:5e3,skipCount:0,tuThang:e})}),o=await i.json();if(o.errors)throw console.error(o.errors),new Error("Failed to fetch API");return o.result},async fetchAPITaiTucBHYT({denThang:t,tuThang:e}){this.key||await this.getAuth();const a={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},n="https://ssm-api.vnpost.vn/api/services/app/BaoCaoTongHopGDThu/DanhSachKhachHangTaiTuc",i=await fetch(n,{method:"POST",headers:a,body:JSON.stringify({denThang:t,filterItems:[],loaiDichVu:parseInt(this.searchText),mangLuoiId:parseInt(parseInt(this.userDetails.mangLuoiId)),maxResultCount:5e3,skipCount:0,tuThang:e,type:-1})}),o=await i.json();if(o.errors)throw console.error(o.errors),new Error("Failed to fetch API");return o.result},async saveBHYT(t){const e={"Content-Type":"application/json"},a="https://app.hotham.vn/api/user-ghi-chu",n=await fetch(a,{method:"PUT",headers:e,body:JSON.stringify({ghiChu:t})}),i=await n.text();return i},async save(t){const e={"Content-Type":"application/json"},a="https://app.hotham.vn/api/bhyts",n=await fetch(a,{method:"POST",headers:e,body:JSON.stringify(t)}),i=await n.json();if(i.errors)throw console.error(i.errors),new Error("Failed to fetch API");return i},async dongBoDanhSach(t){this.$q.dialog({title:"Confirm",message:`Bạn có muốn đồng bộ ${t.length} thẻ BHYT?`,ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((async()=>{$.Z.show({spinner:X.Z,spinnerSize:"100px"}),this.resetBhyt([]);for(let e=0;e<t.length;e++){const{maSoBhxh:a}=t[e],n=this.bhyts.find((t=>t.maSoBhxh===a));n||await this.dongBoDuLieu(t[e]),await this.sleep(500)}$.Z.hide()}))},async dongBo(t){try{const{maSoBhxh:e}=t,{thongTinTK1:a,thongTinTheHGD:n,trangThaiThe:i}=await this.fetchAPIByMaSoBhxh(e),o=await this.save({...t,...n,...a,...i});this.updateBhyt(o)}catch(e){console.log(e)}},async loadBaoCaoChiTietGiaoDich(){const t=new Date,e=t.getFullYear(),a=t.getMonth();await this.hoSoDaXuLy({tuNgay:new Date(e,a-1,1).toISOString(),denNgay:new Date(2024,12,31).toISOString()})},async inC17(){const t=new Map;for(let o=1;o<10;o++)await t.set(`${this.searchText}0${o}`,{tongTien:0,tienBHYT:0,tienBHXH:0,soBienLai:`${this.searchText}0${o}`,ngayLap:null});for(let o=10;o<100;o++)await t.set(`${this.searchText}${o}`,{tongTien:0,tienBHYT:0,tienBHXH:0,soBienLai:`${this.searchText}${o}`,ngayLap:null});await t.set(`${parseInt(this.searchText+99)+1}`,{tongTien:0,tienBHYT:0,tienBHXH:0,soBienLai:`${parseInt(this.searchText+99)+1}`,ngayLap:null});const e=await this.bhyts.filter((t=>{var e;return t.soBienLai.startsWith(null!==(e=this.searchText)&&void 0!==e?e:"21871")}));for(let o=0;o<this.bhyts.length;o++){const e=this.bhyts[o];if(3152===e.userId&&t.has(e.soBienLai)){const a=t.get(e.soBienLai);t.set(e.soBienLai,{...a,ngayLap:e.ngayLap,tienBHYT:1===e.maThuTuc?parseInt(e.tongTien)+a.tienBHYT:a.tienBHYT,tienBHXH:0===e.maThuTuc?parseInt(e.tongTien)+a.tienBHXH:a.tienBHXH,tongTien:parseInt(e.tongTien)+a.tongTien})}}await this.sleep(1e3);const a=await fetch(`https://app.hotham.vn/api/mau-c17-all/1/pdf?tienBHYT=${e.filter((t=>1==t.maThuTuc)).map((t=>t.tongTien)).reduce(((t,e)=>t+e),0)}&tienBHXH=${e.filter((t=>0==t.maThuTuc)).map((t=>t.tongTien)).reduce(((t,e)=>t+e),0)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([...t.values()])}),n=await a.blob();if(n.errors)throw console.error(n.errors),new Error("Failed to fetch API");var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=`${(new Date).toISOString().slice(0,10)}-tham-tu-lap-c17.pdf`,i.click()},async loadBhytsTaiTuc2020(){const t=new Date,e=t.getFullYear(),a=t.getMonth(),{items:n}=await this.fetchAPITaiTucBHYT({denThang:new Date(e,a+2,1).toISOString(),tuThang:new Date(e,a,1).toISOString()});this.resetBhyt(n);const i=n.map((t=>({maSoBhxh:t.maSoBHXH})));await this.dongBoDuLieuDanhSach(i)},async loadBhytsTaiTuc2021(){const{items:t}=await this.fetchAPITaiTucBHYT({denThang:"2022-01-01 00:00:00",tuThang:"2021-01-01 00:00:00"});this.resetBhyt(t);const e=t.map((t=>({maSoBhxh:t.maSoBHXH})));await this.dongBoDuLieuDanhSach(e)},async loadHoSoDaXuLy(){const[t,e]=(new Date).toISOString().slice(0,10).split("-"),{items:a}=await this.fetchAPIHoSoDaXuLy({denNgay:new Date(t,e,1).toISOString(),tuNgay:new Date(t,e-1,1).toISOString()});this.resetBhyt(a);const n=a.map((t=>({...t,userName:t.userName,ngayLap:t.ngayLap,tongTien:t.tongTien,disabled:9!==t.trangThaiHoSo})));await this.dongBoDuLieuDanhSach(n)},async loadHoSoDaNopBD(){const[t,e]=(new Date).toISOString().slice(0,10).split("-"),{items:a}=await this.fetchAPIHoSoDaXuLy({denNgay:new Date(t,e,1).toISOString(),tuNgay:new Date(t,e-1,1).toISOString()});this.resetBhyt(a);const n=a.filter((t=>3152==t.userId&&4==t.trangThaiHoSo&&(new Date).toISOString().slice(0,10)===new Date(t.ngayNopHoSo).toISOString().slice(0,10))).map((t=>({...t,userName:t.userName,ngayLap:t.ngayLap,tongTien:t.tongTien,disabled:9!==t.trangThaiHoSo})));await this.dongBoDuLieuDanhSach(n)},async print(t){let e=document.createElement("a");e.target="_blank";let a=`https://app.hotham.vn/mau-c17/${(new Date).toISOString().slice(0,10)}/pdf?maSoBhxhs=${t}`;e.href=a,e.click()},async loadHoSoChuaXuLy(){const{items:t}=await this.fetchAPIHoSoChuaXuLy();this.resetBhyt(t);const e=t.map((t=>({...t,userName:t.userName,ngayLap:t.ngayLap,tongTien:t.tongTien,completed:1,disabled:1})));await this.dongBoDuLieuDanhSach(e)},async loadBhytsTaiTuc2022(){const{items:t}=await this.fetchAPITaiTucBHYT({denThang:"2023-01-01 00:00:00",tuThang:"2022-01-01 00:00:00"});this.resetBhyt(t);const e=t.map((t=>({maSoBhxh:t.maSoBHXH})));await this.dongBoDuLieuDanhSach(e)},loadBhytByNamSinh(){this.getBhyts({completed:"0",disabled:"0",maXa:"08986",nam:this.searchText})},loadBhytByName(){this.getBhyts({completed:"0",disabled:"0",name:this.searchText})},loadBhyts({thang:t=1}){this.getBhyts({thang:t,completed:"0",disabled:"0",taiTuc:"1",maXa:"08986",name:this.searchText})},loadBhytsHetHan(){this.getBhyts({maXa:"08986",completed:"0",disabled:"0",hetHan:"1",name:this.searchText})},loadBhytsDisable(){this.getBhyts({maXa:"08986",disabled:1})},loadBhytsCompleted(){this.getBhyts({maXa:"08986",completed:1,disabled:"0"})},async timKiem(t){const e=t.split(",");e.length>1&&await this.traCuuBhyts({searchText:t,maXa:"08986"});const a=/[0-9]/g;for(let i=0;i<e.length;i++){const t=e[i].split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "),o=t.match(a);if(o)await this.dongBoDuLieu(o.join("")),await this.sleep(500);else try{await this.traCuuTheoTen(t)}catch(n){W.Z.create({type:"negative",message:"Không thực hiện được!"+n})}}},async khoiTao(){this.resetBhyt([]),this.$route.query.key&&(this.key=await this.saveBHYT(this.$route.query.key)),await this.getAuth()},copyMaSoBhxhToClipboard(){navigator.clipboard.writeText(this.bhyts.map((t=>t.maSoBhxh))).then((function(){W.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){W.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))},copySoDienThoaiToClipboard(){navigator.clipboard.writeText(this.bhyts.map((t=>t.soDienThoai))).then((function(){W.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){W.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))}}};var j=a(1639),O=a(9885),A=a(7128),P=a(7858),Z=a(3246),q=a(490),Y=a(1233),z=a(361),M=a(2857),K=a(2218),F=a(2146),Q=a(9984),G=a.n(Q);const E=(0,j.Z)(U,[["render",v]]),V=E;G()(U,"components",{QPage:O.Z,QBanner:A.Z,QMenu:P.Z,QList:Z.Z,QItem:q.Z,QItemSection:Y.Z,QInput:z.Z,QIcon:M.Z,QSeparator:K.Z}),G()(U,"directives",{ClosePopup:F.Z})}}]);