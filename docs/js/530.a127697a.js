"use strict";(globalThis["webpackChunktodolist"]=globalThis["webpackChunktodolist"]||[]).push([[530],{2530:(t,e,a)=>{a.r(e),a.d(e,{default:()=>j});var i=a(9835),n=a(6970),l=a(1957);const s={class:"inline bg-orange-4 rounded-borders cursor-pointer"},h={class:"fit flex flex-center text-center non-selectable q-pa-md"},o=(0,i._)("br",null,null,-1),c={class:"q-gutter-y-md column"},u=(0,i._)("br",null,null,-1),r=(0,i._)("br",null,null,-1);function d(t,e,a,d,m,g){const T=(0,i.up)("q-item-section"),w=(0,i.up)("q-item"),p=(0,i.up)("q-list"),y=(0,i.up)("q-menu"),k=(0,i.up)("q-banner"),B=(0,i.up)("q-icon"),f=(0,i.up)("q-input"),b=(0,i.up)("q-badge"),H=(0,i.up)("q-item-label"),C=(0,i.up)("ThongTinTheBHYT"),_=(0,i.up)("q-separator"),D=(0,i.up)("q-page"),x=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(D,{class:""},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{"inline-actions":"",class:(0,n.C_)(["bg-orange-4","list-header text-white text-center"])},{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i._)("div",h,[(0,i.Uk)(" Bấm vào đây để tra cứu thông tin "),o,(0,i.Uk)(" (Hạn sử dụng: "+(0,n.zw)(t.userDetails?.hetHan)+") ",1)]),(0,i.Wm)(y,{"touch-position":""},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{style:{"min-width":"100px"}},{default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.loadBhytByName},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tìm tất cả")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[0]||(e[0]=t=>g.loadBhytByUserName(1))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Đã thu tiền BHYT")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[1]||(e[1]=t=>g.loadBhytByUserName(0))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Đã thu tiền BHXH")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.taiTucBHYT1thang},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tái tục 1 tháng (Me)")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.taiTucBHYT2thang},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tái tục 2 tháng (Me)")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[2]||(e[2]=t=>g.loadBhyts({thang:1}))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tái tục 1 tháng (All)")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[3]||(e[3]=t=>g.loadBhyts({thang:2}))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tái tục 2 tháng (All)")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[4]||(e[4]=e=>g.loadBHXHTNs({tienNop:1,taiTucBHXH:1,disabled:"0",completed:"0",userName:t.userDetails.id}))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tái tục BHXH (1 tháng)")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[5]||(e[5]=e=>g.loadBHXHTNs({tienNop:1,userName:t.userDetails.id}))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tái tục BHXH (All)")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.loadTaiTucBHYTBT},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("BHYT bổ trợ")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.loadBhytsHetHan},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Đã hết hạn")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.loadBhytsDisable},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Đã liên hệ")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.loadBhytsCompleted},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Đánh dấu sao")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.loadBaoCaoChiTietGiaoDich},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Báo cáo Chi Tiết Giao Dịch")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.inC17},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("In C17")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.printDanhSachTraThe},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("In Danh sách trả thẻ")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.copyMaSoBhxhToClipboard},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Copy tất cả mã số BHXH")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:t.copyHoTenToClipboard},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Copy tất cả họ tên")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.copySoDienThoaiToClipboard},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Copy tất cả số điện thoại")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.copyNamePhoneClipboard},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Lưu danh bạ")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:t.batTatRemove},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tắt/Bật danh sách")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[6]||(e[6]=t=>g.timMoi(m.searchText))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tìm mới")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.loadBhytByNamSinh},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tìm theo năm sinh")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.loadTaiTucBHYT},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tái tục BHYT (ssm)")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:g.loadTaiTucBHXH},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tái tục BHXH (ssm)")])),_:1})])),_:1},8,["onClick"])),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[7]||(e[7]=e=>t.capNhatBHXHTN(m.searchText))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Đồng bộ BHXH TN")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[8]||(e[8]=e=>g.loadBHXHTNs({tienNop:1,maXa:t.userDetails.maXa}))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Tìm BHXH")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[9]||(e[9]=e=>t.resetBhyt(m.searchText?t.bhyts.filter((t=>t.userName!==m.searchText)):[]))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Xóa danh sách")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[10]||(e[10]=e=>t.resetBhyt(m.searchText?t.bhyts.filter((t=>t.userName===m.searchText)):[]))},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Giữ lại danh sách")])),_:1})])),_:1})),[[x]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{clickable:"",onClick:e[11]||(e[11]=t=>g.loadBhytByUserName())},{default:(0,i.w5)((()=>[(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Đã thu tiền")])),_:1})])),_:1})),[[x]])])),_:1})])),_:1})])])),_:1}),(0,i._)("div",c,[(0,i.Wm)(f,{outlined:"",modelValue:m.searchText,"onUpdate:modelValue":e[13]||(e[13]=t=>m.searchText=t),ref:"inputSearch",onKeyup:e[14]||(e[14]=(0,l.D2)((t=>g.timKiem(m.searchText)),["enter"])),dense:""},{append:(0,i.w5)((()=>[""!==m.searchText?((0,i.wg)(),(0,i.j4)(B,{key:0,name:"close",onClick:e[12]||(e[12]=t=>m.searchText=""),class:"cursor-pointer"})):(0,i.kq)("",!0),(0,i.Wm)(B,{name:"search"})])),_:1},8,["modelValue"])]),(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(H,{header:""},{default:(0,i.w5)((()=>[(0,i.Uk)(" Số lượng: "),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.bhyts.length),1)])),_:1}),(0,i.Uk)("/Trung bình đóng: "+(0,n.zw)(parseInt(t.tongTienBHYT/(t.bhyts.length||1)).toLocaleString())+"/Hoa hồng: "+(0,n.zw)(parseInt((t.tongTienBHYT/(t.bhyts.length||1)*.0264).toFixed(0)).toLocaleString())+"đ/thẻ",1),u,(0,i.Uk)(" Tổng tiền: "),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(parseInt(t.tongTienBHYT).toLocaleString()),1)])),_:1}),(0,i.Uk)(" : Hoa hồng: "+(0,n.zw)(parseInt((.0264*t.tongTienBHYT).toFixed(0)).toLocaleString())+"đ ",1),r,(0,i.Uk)(" BHXHTN : "),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(parseInt(t.tongTienBHXH).toLocaleString()),1)])),_:1})])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.bhyts,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id},[(0,i.Wm)(C,{bhyt:t},null,8,["bhyt"]),(0,i.Wm)(_,{spaced:"",inset:""})])))),128))])),_:1})])),_:1})}a(2309);var m=a(3100),g=a(1925),T=a(4328);const w={components:{ThongTinTheBHYT:g.Z},data(){return{searchText:"",tuNgayDenNgay:"",soBienLai:""}},computed:{...(0,m.Se)("bhyts",["bhyts","tongTienBHYT","tongTienBHXH"]),...(0,m.rn)("auth",["userDetails"])},methods:{...(0,m.nv)("bhyts",["getBhyts","resetBhyt","traCuuBhyts","updateBhyt","hoSoDaXuLy","dongBoDuLieu","traCuuTheoTen","getDanhSachKhachHangTaiTuc","copyHoTenToClipboard","batTatRemove","capNhatBHXHTN"]),...(0,m.nv)("auth",["firebaseUpdateUser","handleAuthStateChanged"]),sleep(t){return new Promise((e=>setTimeout(e,t)))},taiTucBHYT1thang(){this.searchText=this.userDetails.id,this.getBhyts({thang:1,completed:"0",disabled:"0",taiTuc:"1",userName:this.userDetails.id})},taiTucBHYT2thang(){this.searchText=this.userDetails.id,this.getBhyts({thang:2,completed:"0",disabled:"0",taiTuc:"1",userName:this.userDetails.id})},async loadTaiTucBHXH(){const t=await this.getDanhSachKhachHangTaiTuc({filterItems:[],maxResultCount:500,skipCount:0,mangLuoiId:this.userDetails.quaTrinhCongTac.mangLuoiId,tuThang:"2020-01-01 00:00:00",denThang:"2025-01-01 00:00:00",type:-1,loaiDichVu:0});this.capNhatBHXHTN([...new Set(t.map((t=>t.maSoBHXH)))].join())},async loadTaiTucBHYT(){const t=await this.getDanhSachKhachHangTaiTuc({filterItems:[],maxResultCount:5e3,skipCount:0,mangLuoiId:this.userDetails.quaTrinhCongTac.mangLuoiId,tuThang:"2020-01-01 00:00:00",denThang:"2025-01-01 00:00:00",type:-1,loaiDichVu:1});this.dongBoDuLieu([...new Set(t.map((t=>t.maSoBHXH)))].join())},async loadBaoCaoChiTietGiaoDich(){const t=new Date,e=t.getFullYear(),a=t.getMonth();2!==this.searchText.split(" : ").length&&(this.tuNgayDenNgay=this.searchText=`${new Date(e,a-2,1).toISOString().slice(0,10)} : ${new Date(2024,12,31).toISOString().slice(0,10)}`),this.$q.dialog({title:"Báo cáo chi tiết giao dịch",message:"Từ ngày : đến ngày?",prompt:{model:this.searchText,type:"text"},cancel:!0,persistent:!0}).onOk((async t=>{const e=t.split(" : ");try{await this.hoSoDaXuLy({tuNgay:e[0],denNgay:e[1],mangLuoiId:this.userDetails.quaTrinhCongTac.mangLuoiId})}catch(a){T.Z.create({message:"Không thể kế nối đến máy chủ !",color:"red"})}}))},async inC17(){if(!this.bhyts.length&&!this.tuNgayDenNgay)return T.Z.create({type:"negative",message:"Vào báo cáo giao dịch trước khi xuất C17."}),void this.loadBaoCaoChiTietGiaoDich();this.$q.dialog({title:"In C17 (quyển)",message:"Số biên lai?",prompt:{model:this.soBienLai,type:"text"},cancel:!0,persistent:!0}).onOk((async t=>{if(!t)return;const e=new Map;for(let s=1;s<10;s++)await e.set(`${t}0${s}`,{tongTien:0,tienBHYT:0,tienBHXH:0,soBienLai:`${t}0${s}`,ngayLap:null});for(let s=10;s<100;s++)await e.set(`${t}${s}`,{tongTien:0,tienBHYT:0,tienBHXH:0,soBienLai:`${t}${s}`,ngayLap:null});await e.set(`${parseInt(t+99)+1}`,{tongTien:0,tienBHYT:0,tienBHXH:0,soBienLai:`${parseInt(t+99)+1}`,ngayLap:null});const a=await this.bhyts.filter((e=>e.soBienLai.startsWith(t)));if(!a.length)return T.Z.create({type:"negative",message:"Không tìm thấy quyển biên lai!"}),null;for(let s=0;s<this.bhyts.length;s++){const t=this.bhyts[s];if(e.has(t.soBienLai)){const a=e.get(t.soBienLai);e.set(t.soBienLai,{...a,ngayLap:t.ngayLap,tienBHYT:1===t.maThuTuc?parseInt(t.tongTien)+a.tienBHYT:a.tienBHYT,tienBHXH:0===t.maThuTuc?parseInt(t.tongTien)+a.tienBHXH:a.tienBHXH,tongTien:parseInt(t.tongTien)+a.tongTien})}}await this.sleep(1e3);const i=await fetch(`https://longwebstudio.amycos.vn/wordpress/wp-content/app/api/mau-c17-all/1/pdf?tienBHYT=${a.filter((t=>1==t.maThuTuc)).map((t=>t.tongTien)).reduce(((t,e)=>t+e),0)}&tienBHXH=${a.filter((t=>0==t.maThuTuc)).map((t=>t.tongTien)).reduce(((t,e)=>t+e),0)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([...e.values()])}),n=await i.blob();if(n.errors)throw console.error(n.errors),new Error("Failed to fetch API");var l=document.createElement("a");l.href=window.URL.createObjectURL(n),l.download=`${(new Date).toISOString().slice(0,10)}-tham-tu-lap-c17.pdf`,l.click()}))},async print(t){let e=document.createElement("a");e.target="_blank";let a=`https://longwebstudio.amycos.vn/wordpress/wp-content/app/mau-c17/${(new Date).toISOString().slice(0,10)}/pdf?maSoBhxhs=${t}`;e.href=a,e.click()},loadBhytByNamSinh(){this.$q.dialog({title:"Tìm thẻ BHYT theo năm sinh",message:"Nhập năm sinh?",prompt:{model:this.searchText,isValid:t=>4==t.length,type:"number"},cancel:!0,persistent:!0}).onOk((t=>{t&&(this.searchText=t),this.getBhyts({completed:"0",disabled:"0",maXa:this.userDetails.maXa,nam:t})}))},loadBhytByUserName(t){this.searchText||(this.searchText=this.userDetails.maNhanVienThu),1===t?this.getBhyts({userName:this.searchText,isBHYT:1}):0===t?this.getBhyts({userName:this.searchText,isBHXHTN:1}):this.getBhyts({userName:this.searchText})},loadBhytByName(){this.$q.dialog({title:"Tìm thẻ BHYT",message:"Nhập nội dung tìm kiếm?",prompt:{model:this.searchText,isValid:t=>t.length>=2,type:"text"},cancel:!0,persistent:!0}).onOk((t=>{this.searchText=t,this.getBhyts({name:t,maXa:t.length<11?this.userDetails.maXa:null})}))},loadBhyts({thang:t=1}){this.searchText="",this.getBhyts({thang:t,completed:"0",disabled:"0",taiTuc:"1",maXa:this.userDetails.maXa,name:this.searchText})},loadTaiTucBHYTBT(){this.searchText="",this.getBhyts({maXa:this.userDetails.maXa,taiTucBHYTBT:"1"})},loadBHXHTNs(t){this.getBhyts({...t,name:this.searchText})},loadBhytsHetHan(){this.getBhyts({maXa:this.userDetails.maXa,completed:"0",disabled:"0",hetHan:"1",name:this.searchText})},loadBhytsDisable(){this.getBhyts({maXa:this.userDetails.maXa,disabled:1})},loadBhytsCompleted(){this.getBhyts({maXa:this.userDetails.maXa,completed:1,disabled:"0"})},async timKiem(t){const e=t.split("|");e.length>1&&(this.searchText=t=e[0]);const a=t.split(",");a.length>1&&await this.traCuuBhyts({searchText:t,maXa:this.userDetails.maXa});const i=/[0-9]/g;for(let l=0;l<a.length;l++){const t=a[l].split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "),e=t.match(i);if(e){if(1===a.length)try{await this.getBhyts({name:data,maXa:data.length<11?this.userDetails.maXa:null})}catch(n){}await this.dongBoDuLieu(e.join("")),await this.sleep(500)}else try{await this.traCuuTheoTen({name:t,maXa:this.userDetails.maXa,maHuyen:this.userDetails.maHuyen,maTinh:this.userDetails.maTinh}),this.bhyts.length>50&&this.resetBhyt([])}catch(n){T.Z.create({type:"negative",message:"Không thực hiện được!"+n})}}this.$refs.inputSearch.select()},async timMoi(t){const e=t.split(","),a=JSON.parse(localStorage.getItem("hoTens"))||[],i=e.filter((t=>!a.includes(t)));this.searchText=i.join(),this.timKiem(this.searchText)},async khoiTao(){this.resetBhyt([]),this.$route.query.key&&(this.key=await this.saveBHYT(this.$route.query.key))},async printDanhSachTraThe(){let t=document.createElement("a");t.target="_blank",t.href=`https://longwebstudio.amycos.vn/wordpress/wp-content/app/danh-sach-tra-the/1/pdf?maSoBhxhs=${this.bhyts.map((t=>t.maSoBhxh)).join(",")}`,t.click()},copyMaSoBhxhToClipboard(){navigator.clipboard.writeText(this.bhyts.map((t=>t.maSoBhxh))).then((function(){T.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){T.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))},copySoDienThoaiToClipboard(){navigator.clipboard.writeText([...new Set(this.bhyts.map((t=>t.soDienThoai2||t.soDienThoai)))].join("\r\n")).then((function(){T.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){T.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))},copyNamePhoneClipboard(){this.download("NamePhone.csv","Name\tPhone\r\n"+[...new Set(this.bhyts.filter((t=>t.soDienThoai2||t.soDienThoai)).map((({soDienThoai2:t,soDienThoai:e,hoTen:a,ngaySinhDt:i,userName:n,soTheBhyt:l})=>`${a} ${l?.slice(0,2)||""}${n==this.userDetails.id||n==this.userDetails.maNhanVienThu?"":"_"}${new Date(i).getFullYear()}\t${t||e}`))).values()].join("\r\n"))},download(t,e){var a=document.createElement("a");if(a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),a.setAttribute("download",t),document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),a.dispatchEvent(i)}else a.click()}}};var p=a(1639),y=a(9885),k=a(7128),B=a(7858),f=a(3246),b=a(490),H=a(1233),C=a(7471),_=a(2857),D=a(3115),x=a(990),X=a(2218),N=a(2146),U=a(9984),S=a.n(U);const W=(0,p.Z)(w,[["render",d]]),j=W;S()(w,"components",{QPage:y.Z,QBanner:k.Z,QMenu:B.Z,QList:f.Z,QItem:b.Z,QItemSection:H.Z,QInput:C.Z,QIcon:_.Z,QItemLabel:D.Z,QBadge:x.Z,QSeparator:X.Z}),S()(w,"directives",{ClosePopup:N.Z})}}]);