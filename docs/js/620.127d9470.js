"use strict";(globalThis["webpackChunktodo_buudienxatulap"]=globalThis["webpackChunktodo_buudienxatulap"]||[]).push([[620],{2620:(t,e,a)=>{a.r(e),a.d(e,{default:()=>L});var n=a(9835),i=a(6970),o=a(1957);const s={class:"inline bg-orange-4 rounded-borders cursor-pointer"},h={class:"fit flex flex-center text-center non-selectable q-pa-md"},l=(0,n._)("br",null,null,-1),c={class:"q-gutter-y-md column"};function r(t,e,a,r,u,d){const p=(0,n.up)("q-item-section"),g=(0,n.up)("q-item"),y=(0,n.up)("q-list"),T=(0,n.up)("q-menu"),w=(0,n.up)("q-banner"),m=(0,n.up)("q-icon"),B=(0,n.up)("q-input"),f=(0,n.up)("ThongTinTheBHYT"),k=(0,n.up)("q-separator"),S=(0,n.up)("q-page"),C=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(S,{class:""},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{"inline-actions":"",class:(0,i.C_)(["bg-orange-4","list-header text-white text-center"])},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n._)("div",h,[(0,n.Uk)(" Tra cứu "+(0,i.zw)(t.bhyts.length)+"/"+(0,i.zw)(parseInt(t.tongTien).toLocaleString())+"đ!",1),l,(0,n.Uk)("(Bấm vào đây và lựa chọn) ")]),(0,n.Wm)(T,{"touch-position":""},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{style:{"min-width":"100px"}},{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBhytByUserName},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Đã thu tiền")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBhytByNamSinh},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tìm theo năm sinh")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBhytByName},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tìm tất cả")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:e[0]||(e[0]=t=>d.loadBhyts({thang:1}))},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tái tục 1 tháng")])),_:1})])),_:1})),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:e[1]||(e[1]=t=>d.loadBhyts({thang:2}))},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tái tục 2 tháng")])),_:1})])),_:1})),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:e[2]||(e[2]=t=>d.loadBHXHTNs({isBHXHTN:1,taiTucBHXH:1,completed:"0",disabled:"0"}))},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tái tục BHXH TN 1 tháng")])),_:1})])),_:1})),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:e[3]||(e[3]=t=>d.loadBHXHTNs({isBHXHTN:1}))},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tái tục BHXH TN (All)")])),_:1})])),_:1})),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBhytsHetHan},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Đã hết hạn")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBhytsDisable},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Đã liên hệ")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBhytsCompleted},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Đánh dấu sao")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadHoSoChuaXuLy},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Hồ sơ chưa xử lý")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadHoSoDaNopBD},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Hồ sơ đã nộp")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadHoSoDaXuLy},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Hồ sơ đã xử lý")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBaoCaoChiTietGiaoDich},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Báo cáo Chi Tiết Giao Dịch")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.inC17},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("In C17")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.printDanhSachTraThe},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("In Danh sách trả thẻ")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadTaiTucBHXH},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tái tục BHXH")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBhytsTaiTuc2020},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tải dữ liệu tái tục mới nhất")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBhytsTaiTuc2021},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tải dữ liệu tái tục 2021 từ SSM")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.loadBhytsTaiTuc2022},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Tải dữ liệu tái tục 2022 từ SSM")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.copyMaSoBhxhToClipboard},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Copy tất cả mã số BHXH")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:t.copyHoTenToClipboard},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Copy tất cả họ tên")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.copySoDienThoaiToClipboard},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Copy tất cả số điện thoại")])),_:1})])),_:1},8,["onClick"])),[[C]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{clickable:"",onClick:d.copyNamePhoneClipboard},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Copy danh bạ")])),_:1})])),_:1},8,["onClick"])),[[C]])])),_:1})])),_:1})])])),_:1}),(0,n._)("div",c,[(0,n.Wm)(B,{outlined:"",modelValue:u.searchText,"onUpdate:modelValue":e[5]||(e[5]=t=>u.searchText=t),ref:"inputSearch",onKeyup:e[6]||(e[6]=(0,o.D2)((t=>d.timKiem(u.searchText)),["enter"])),dense:""},{append:(0,n.w5)((()=>[""!==u.searchText?((0,n.wg)(),(0,n.j4)(m,{key:0,name:"close",onClick:e[4]||(e[4]=t=>u.searchText=""),class:"cursor-pointer"})):(0,n.kq)("",!0),(0,n.Wm)(m,{name:"search"})])),_:1},8,["modelValue"])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.bhyts,(t=>((0,n.wg)(),(0,n.j4)(y,{key:t.id},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{bhyt:t},null,8,["bhyt"]),(0,n.Wm)(k,{spaced:"",inset:""})])),_:2},1024)))),128))])),_:1})}a(2309);var u=a(3100),d=a(951),p=a(6950),g=a(8359),y=a(6827);const T={components:{ThongTinTheBHYT:d.Z},data(){return{searchText:""}},computed:{...(0,u.Se)("bhyts",["bhyts","tongTien"]),...(0,u.rn)("store",["userDetails"])},methods:{...(0,u.nv)("bhyts",["getBhyts","resetBhyt","traCuuBhyts","updateBhyt","resetBhyt","hoSoDaXuLy","dongBoDuLieu","traCuuTheoTen","getDanhSachKhachHangTaiTuc","copyHoTenToClipboard"]),sleep(t){return new Promise((e=>setTimeout(e,t)))},async loadTaiTucBHXH(){this.getDanhSachKhachHangTaiTuc({filterItems:[],maxResultCount:500,skipCount:0,mangLuoiId:4580,tuThang:"2023-03-01 00:00:00",denThang:"2023-04-01 00:00:00",type:-1,loaiDichVu:0})},async fetchAPIByName(t){this.key||await this.getAuth();const e={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},{maXa:a}=this.userDetails,n=`https://ssm-api.vnpost.vn/api/services/app/TraCuu/TraCuuMaSoBHXH?maTinh=01&maHuyen=250&maXa=${a}&hoTen=${t}&isCoDau=true&`,i=await fetch(n,{method:"GET",headers:e}),o=await i.json();if(o.errors)throw console.error(o.errors),new Error("Failed to fetch API");return o.result.value},async fetchAPIByMaSoBhxh(t){this.key||await this.getAuth();const e={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},a=`https://ssm-api.vnpost.vn/api/services/app/TraCuu/TraCuuThongTinBHYT?maSoBhxh=${t.slice(t.length-10)}`,n=await fetch(a,{method:"GET",headers:e}),i=await n.json();if(i.errors)throw console.error(i.errors),new Error("Failed to fetch API");return i.result},async fetchAPIHoSoDaXuLy({tuNgay:t,denNgay:e}){const a=parseInt(this.searchText);let n=0;a&&(n=a),this.key||await this.getAuth();const i={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},o="https://ssm-api.vnpost.vn/api/services/app/KeKhai/TraCuuNoGroup",s=new Date,h=s.getFullYear(),l=s.getMonth(),c=await fetch(o,{method:"POST",headers:i,body:JSON.stringify({dateForm:"ngayLap",denNgay:e??new Date(h,l-n+2,1).toISOString(),filterItems:[],hoSoChuaThuTien:!1,hoSoQuaHan:0,keyMenu:"1",mangLuoiId:parseInt(this.userDetails.mangLuoiId),maxResultCount:5e3,skipCount:0,tuNgay:t??new Date(h,l-n,1).toISOString()})}),r=await c.json();if(r.errors)throw console.error(r.errors),new Error("Failed to fetch API");return r.result},async fetchAPIHoSoChuaXuLy(){this.key||await this.getAuth();const t={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},e="https://ssm-api.vnpost.vn/api/services/app/KeKhai/TraCuuNoGroup",a=new Date,n=a.getFullYear(),i=a.getMonth(),o=await fetch(e,{method:"POST",headers:t,body:JSON.stringify({dateForm:"ngayLap",denNgay:new Date(n,i+2,1).toISOString(),filterItems:[],hoSoChuaThuTien:!1,hoSoQuaHan:0,keyMenu:"2",mangLuoiId:parseInt(this.userDetails.mangLuoiId),maxResultCount:5e3,skipCount:0,tuNgay:new Date(n,i,1).toISOString()})}),s=await o.json();if(s.errors)throw console.error(s.errors),new Error("Failed to fetch API");return s.result},async fetchAPIBaoCaoChiTietGiaoDich({denThang:t,tuThang:e}){this.key||await this.getAuth();const a={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},n="https://ssm-api.vnpost.vn/api/services/app/BaoCaoTongHopGDThu/BaoCaoChiTietGiaoDich",i=await fetch(n,{method:"POST",headers:a,body:JSON.stringify({denThang:t,filterItems:[],loaiGiaoDich:0,mangLuoiId:parseInt(parseInt(this.userDetails.mangLuoiId)),maxResultCount:5e3,skipCount:0,tuThang:e})}),o=await i.json();if(o.errors)throw console.error(o.errors),new Error("Failed to fetch API");return o.result},async fetchAPITaiTucBHYT({denThang:t,tuThang:e}){this.key||await this.getAuth();const a={"Content-Type":"application/json",Authorization:`Bearer ${this.key}`},n="https://ssm-api.vnpost.vn/api/services/app/BaoCaoTongHopGDThu/DanhSachKhachHangTaiTuc",i=await fetch(n,{method:"POST",headers:a,body:JSON.stringify({denThang:t,filterItems:[],loaiDichVu:parseInt(this.searchText),mangLuoiId:parseInt(parseInt(this.userDetails.mangLuoiId)),maxResultCount:5e3,skipCount:0,tuThang:e,type:-1})}),o=await i.json();if(o.errors)throw console.error(o.errors),new Error("Failed to fetch API");return o.result},async saveBHYT(t){const e={"Content-Type":"application/json"},a="https://app.hotham.vn/api/user-ghi-chu",n=await fetch(a,{method:"PUT",headers:e,body:JSON.stringify({ghiChu:t})}),i=await n.text();return i},async save(t){const e={"Content-Type":"application/json"},a="https://app.hotham.vn/api/bhyts",n=await fetch(a,{method:"POST",headers:e,body:JSON.stringify(t)}),i=await n.json();if(i.errors)throw console.error(i.errors),new Error("Failed to fetch API");return i},async dongBoDanhSach(t){this.$q.dialog({title:"Confirm",message:`Bạn có muốn đồng bộ ${t.length} thẻ BHYT?`,ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((async()=>{p.Z.show({spinner:g.Z,spinnerSize:"100px"}),this.resetBhyt([]);for(let e=0;e<t.length;e++){const{maSoBhxh:a}=t[e],n=this.bhyts.find((t=>t.maSoBhxh===a));n||await this.dongBoDuLieu(t[e]),await this.sleep(500)}p.Z.hide()}))},async dongBo(t){try{const{maSoBhxh:e}=t,{thongTinTK1:a,thongTinTheHGD:n,trangThaiThe:i}=await this.fetchAPIByMaSoBhxh(e),o=await this.save({...t,...n,...a,...i});this.updateBhyt(o)}catch(e){console.log(e)}},async loadBaoCaoChiTietGiaoDich(){const t=new Date,e=t.getFullYear(),a=t.getMonth();2!==this.searchText.split(" - ").length&&(this.searchText=`${new Date(e,a-2,1).toISOString()} - ${new Date(2024,12,31).toISOString()}`);const n=this.searchText.split(" - ");await this.hoSoDaXuLy({tuNgay:n[0],denNgay:n[1]})},async inC17(){const t=new Map;for(let o=1;o<10;o++)await t.set(`${this.searchText}0${o}`,{tongTien:0,tienBHYT:0,tienBHXH:0,soBienLai:`${this.searchText}0${o}`,ngayLap:null});for(let o=10;o<100;o++)await t.set(`${this.searchText}${o}`,{tongTien:0,tienBHYT:0,tienBHXH:0,soBienLai:`${this.searchText}${o}`,ngayLap:null});await t.set(`${parseInt(this.searchText+99)+1}`,{tongTien:0,tienBHYT:0,tienBHXH:0,soBienLai:`${parseInt(this.searchText+99)+1}`,ngayLap:null});const e=await this.bhyts.filter((t=>t.soBienLai.startsWith(this.searchText??"21871")));for(let o=0;o<this.bhyts.length;o++){const e=this.bhyts[o];if(3152===e.userId&&t.has(e.soBienLai)){const a=t.get(e.soBienLai);t.set(e.soBienLai,{...a,ngayLap:e.ngayLap,tienBHYT:1===e.maThuTuc?parseInt(e.tongTien)+a.tienBHYT:a.tienBHYT,tienBHXH:0===e.maThuTuc?parseInt(e.tongTien)+a.tienBHXH:a.tienBHXH,tongTien:parseInt(e.tongTien)+a.tongTien})}}await this.sleep(1e3);const a=await fetch(`https://app.hotham.vn/api/mau-c17-all/1/pdf?tienBHYT=${e.filter((t=>1==t.maThuTuc)).map((t=>t.tongTien)).reduce(((t,e)=>t+e),0)}&tienBHXH=${e.filter((t=>0==t.maThuTuc)).map((t=>t.tongTien)).reduce(((t,e)=>t+e),0)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([...t.values()])}),n=await a.blob();if(n.errors)throw console.error(n.errors),new Error("Failed to fetch API");var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=`${(new Date).toISOString().slice(0,10)}-tham-tu-lap-c17.pdf`,i.click()},async loadBhytsTaiTuc2020(){const t=new Date,e=t.getFullYear(),a=t.getMonth(),{items:n}=await this.fetchAPITaiTucBHYT({denThang:new Date(e,a+2,1).toISOString(),tuThang:new Date(e,a,1).toISOString()});this.resetBhyt(n);const i=n.map((t=>({maSoBhxh:t.maSoBHXH})));await this.dongBoDuLieuDanhSach(i)},async loadBhytsTaiTuc2021(){const{items:t}=await this.fetchAPITaiTucBHYT({denThang:"2022-01-01 00:00:00",tuThang:"2021-01-01 00:00:00"});this.resetBhyt(t);const e=t.map((t=>({maSoBhxh:t.maSoBHXH})));await this.dongBoDuLieuDanhSach(e)},async loadHoSoDaXuLy(){const[t,e]=(new Date).toISOString().slice(0,10).split("-"),{items:a}=await this.fetchAPIHoSoDaXuLy({denNgay:new Date(t,e,1).toISOString(),tuNgay:new Date(t,e-1,1).toISOString()});this.resetBhyt(a);const n=a.map((t=>({...t,userName:t.userName,ngayLap:t.ngayLap,tongTien:t.tongTien,disabled:9!==t.trangThaiHoSo})));await this.dongBoDuLieuDanhSach(n)},async loadHoSoDaNopBD(){const[t,e]=(new Date).toISOString().slice(0,10).split("-"),{items:a}=await this.fetchAPIHoSoDaXuLy({denNgay:new Date(t,e,1).toISOString(),tuNgay:new Date(t,e-1,1).toISOString()});this.resetBhyt(a);const n=a.filter((t=>3152==t.userId&&4==t.trangThaiHoSo&&(new Date).toISOString().slice(0,10)===new Date(t.ngayNopHoSo).toISOString().slice(0,10))).map((t=>({...t,userName:t.userName,ngayLap:t.ngayLap,tongTien:t.tongTien,disabled:9!==t.trangThaiHoSo})));await this.dongBoDuLieuDanhSach(n)},async print(t){let e=document.createElement("a");e.target="_blank";let a=`https://app.hotham.vn/mau-c17/${(new Date).toISOString().slice(0,10)}/pdf?maSoBhxhs=${t}`;e.href=a,e.click()},async loadHoSoChuaXuLy(){const{items:t}=await this.fetchAPIHoSoChuaXuLy();this.resetBhyt(t);const e=t.map((t=>({...t,userName:t.userName,ngayLap:t.ngayLap,tongTien:t.tongTien,completed:1,disabled:1})));await this.dongBoDuLieuDanhSach(e)},async loadBhytsTaiTuc2022(){const{items:t}=await this.fetchAPITaiTucBHYT({denThang:"2023-01-01 00:00:00",tuThang:"2022-01-01 00:00:00"});this.resetBhyt(t);const e=t.map((t=>({maSoBhxh:t.maSoBHXH})));await this.dongBoDuLieuDanhSach(e)},loadBhytByNamSinh(){this.getBhyts({completed:"0",disabled:"0",maXa:"08986",nam:this.searchText})},loadBhytByUserName(){this.searchText||y.Z.create({type:"negative",message:"Nhập 1 hoặc 0!"+err}),this.getBhyts({userName:this.searchText})},loadBhytByName(){this.getBhyts({name:this.searchText})},loadBhyts({thang:t=1}){this.getBhyts({thang:t,completed:"0",disabled:"0",taiTuc:"1",maXa:"08986",name:this.searchText})},loadBHXHTNs({isBHXHTN:t=null,completed:e=null,disabled:a=null,taiTucBHXH:n=null}){this.getBhyts({name:this.searchText,isBHXHTN:t,completed:e,disabled:a,taiTucBHXH:n})},loadBhytsHetHan(){this.getBhyts({maXa:"08986",completed:"0",disabled:"0",hetHan:"1",name:this.searchText})},loadBhytsDisable(){this.getBhyts({maXa:"08986",disabled:1})},loadBhytsCompleted(){this.getBhyts({maXa:"08986",completed:1,disabled:"0"})},async timKiem(t){const e=t.split("|");e.length>1&&(this.searchText=t=e[0]);const a=t.split(",");a.length>1&&await this.traCuuBhyts({searchText:t,maXa:"08986"});const n=/[0-9]/g;for(let o=0;o<a.length;o++){const t=a[o].split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "),e=t.match(n);if(e)await this.dongBoDuLieu(e.join("")),await this.sleep(500);else try{await this.traCuuTheoTen(t)}catch(i){y.Z.create({type:"negative",message:"Không thực hiện được!"+i})}}this.$refs.inputSearch.select()},async khoiTao(){this.resetBhyt([]),this.$route.query.key&&(this.key=await this.saveBHYT(this.$route.query.key)),await this.getAuth()},async printDanhSachTraThe(){let t=document.createElement("a");t.target="_blank",t.href=`https://app.hotham.vn/danh-sach-tra-the/1/pdf?maSoBhxhs=${this.bhyts.map((t=>t.maSoBhxh)).join(",")}`,t.click()},copyMaSoBhxhToClipboard(){navigator.clipboard.writeText(this.bhyts.map((t=>t.maSoBhxh))).then((function(){y.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){y.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))},copySoDienThoaiToClipboard(){navigator.clipboard.writeText([...new Set(this.bhyts.map((t=>t.soDienThoai)))].join("\r\n")).then((function(){y.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){y.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))},copyNamePhoneClipboard(){navigator.clipboard.writeText("Name\tPhone\r\n"+[...new Map(this.bhyts.map((({soDienThoai:t,hoTen:e,ngaySinhDt:a})=>[t,e+" "+new Date(a).getFullYear()+"\t"+t]))).values()].join("\r\n")).then((function(){y.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){y.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))}}};var w=a(1639),m=a(9885),B=a(7128),f=a(7858),k=a(3246),S=a(490),C=a(1233),H=a(7471),b=a(2857),D=a(2218),I=a(2146),_=a(9984),x=a.n(_);const v=(0,w.Z)(T,[["render",r]]),L=v;x()(T,"components",{QPage:m.Z,QBanner:B.Z,QMenu:f.Z,QList:k.Z,QItem:S.Z,QItemSection:C.Z,QInput:H.Z,QIcon:b.Z,QSeparator:D.Z}),x()(T,"directives",{ClosePopup:I.Z})}}]);