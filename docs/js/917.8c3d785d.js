"use strict";(globalThis["webpackChunktodolist"]=globalThis["webpackChunktodolist"]||[]).push([[917],{689:(t,e,a)=>{a.r(e),a.d(e,{default:()=>f});var s=a(9835),o=a(1957);const h={class:"q-gutter-y-md column"};function n(t,e,a,n,i,l){const r=(0,s.up)("ListHeader"),u=(0,s.up)("q-icon"),c=(0,s.up)("q-input"),p=(0,s.up)("ThongTinTheBHYT"),g=(0,s.up)("q-separator"),d=(0,s.up)("q-list"),m=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{bgcolor:"bg-orange-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("Tra cứu thẻ BHYT")])),_:1}),(0,s._)("div",h,[(0,s.Wm)(c,{outlined:"",modelValue:i.searchText,"onUpdate:modelValue":e[1]||(e[1]=t=>i.searchText=t),onKeyup:(0,o.D2)(l.timKiem,["enter"]),placeholder:"Mã số BHXH",hint:"Mã số cách nhau bởi dấu phẩy, nhấn Enter để tìm kiếm",dense:""},{append:(0,s.w5)((()=>[""!==i.searchText?((0,s.wg)(),(0,s.j4)(u,{key:0,name:"close",onClick:e[0]||(e[0]=t=>i.searchText=""),class:"cursor-pointer"})):(0,s.kq)("",!0),(0,s.Wm)(u,{name:"search"})])),_:1},8,["modelValue","onKeyup"])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.bhyts,(t=>((0,s.wg)(),(0,s.j4)(d,{key:t.id},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{bhyt:t},null,8,["bhyt"]),(0,s.Wm)(g,{spaced:"",inset:""})])),_:2},1024)))),128))])),_:1})}a(9665);var i=a(3100),l=a(6950),r=a(8359),u=a(6650),c=a(4026),p=a(1569),g=a(465);const d={components:{ThongTinTheBHYT:u.Z,ListHeader:c.Z},data(){return{searchText:"",bhyts:[]}},methods:{async timKiem(){if(window.close(),0===this.searchText.length||""===localStorage.getItem("setIsLogin"))return;this.bhyts=[],l.Z.show({spinner:r.Z,spinnerSize:"100px"});let t=this.searchText.split(",");for(let a=0;a<t.length;a++){const s=t[a];try{await this.xem(s)}catch(e){console.log(e)}}window.close(),l.Z.hide()},async luu(t){let{data:e}=await p.api.put(`/api/bhyts/${t.maSoBhxh}`,t);return e},async xem(t){let{data:e}=await g.Z.get(`/services/app/TraCuu/TraCuuThongTinBHYT?maSoBhxh=${t.slice(t.length-10)}`),{thongTinTK1:a,thongTinTheHGD:s}=e.result;if(a){let t=await this.luu({...s,maHoGd:a.maHoGd});this.bhyts.length>5&&(this.bhyts=[]),this.bhyts.push(t)}}},computed:{...(0,i.Se)("auth",["isLogin"])},async mounted(){localStorage.getItem("setIsLogin")||this.$router.push("/auth"),this.$route.query.q&&(this.searchText=this.$route.query.q);let{data:t}=await p.api.get("/api/maSoBhxhs");localStorage.setItem("dsMaSoBhxhsDaCapNhat",JSON.stringify(t));let e=await axios.get("/api/maHoGd");localStorage.setItem("maHoGds",JSON.stringify(e.data));let a=JSON.parse(localStorage.getItem("dsMaSoBhxhs"));console.log("danh sách mã số bh còn lại: "+a.length),console.log("Đã cập nhật thành công: "+t.length);let s=!1;while(s)t.includes(s)||(await this.xem(s),t.push(s)),s=a.pop(),localStorage.setItem("dsMaSoBhxhs",JSON.stringify(a));this.timKiem()}};var m=a(1639),T=a(9885),y=a(7471),w=a(2857),x=a(3246),S=a(2218),b=a(9984),H=a.n(b);const Z=(0,m.Z)(d,[["render",n]]),f=Z;H()(d,"components",{QPage:T.Z,QInput:y.Z,QIcon:w.Z,QList:x.Z,QSeparator:S.Z})}}]);