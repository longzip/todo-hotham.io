"use strict";(self["webpackChunktodo_buudienxatulap"]=self["webpackChunktodo_buudienxatulap"]||[]).push([[628],{4026:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(9835),o=n(6970);const s={class:"text-bold text-subtitle1"};function i(e,t,n,i,r,l){const c=(0,a.up)("q-banner");return(0,a.wg)(),(0,a.j4)(c,{dense:"","inline-actions":"",class:(0,o.C_)([n.bgcolor,"list-header text-white text-center"])},{default:(0,a.w5)((()=>[(0,a._)("span",s,[(0,a.WI)(e.$slots,"default")])])),_:3},8,["class"])}const r={props:["bgcolor"]};var l=n(1639),c=n(7128),d=n(9984),p=n.n(d);const u=(0,l.Z)(r,[["render",i]]),h=u;p()(r,"components",{QBanner:c.Z})},9628:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var a=n(9835),o=n(1957),s=n(6970);const i={class:"q-pa-md"},r=(0,a.Uk)("Khách hàng lớn "),l={class:"q-gutter-y-md column"},c=["href"];function d(e,t,n,d,p,u){const h=(0,a.up)("ListHeader"),m=(0,a.up)("q-icon"),g=(0,a.up)("q-input"),w=(0,a.up)("q-item-label"),I=(0,a.up)("q-item-section"),k=(0,a.up)("q-item"),f=(0,a.up)("q-separator"),D=(0,a.up)("q-list");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(h,{bgcolor:"bg-orange-4"},{default:(0,a.w5)((()=>[r])),_:1}),(0,a._)("div",l,[(0,a.Wm)(g,{outlined:"",modelValue:e.searchText,"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchText=t),placeholder:"Từ khóa",hint:"Tìm kiếm theo thông tin thẻ BHYT",onKeyup:t[2]||(t[2]=(0,o.D2)((t=>e.loadData()),["enter"])),dense:""},{append:(0,a.w5)((()=>[""!==e.searchText?((0,a.wg)(),(0,a.j4)(m,{key:0,name:"close",onClick:t[0]||(t[0]=t=>e.searchText=""),class:"cursor-pointer"})):(0,a.kq)("",!0),(0,a.Wm)(m,{name:"search"})])),_:1},8,["modelValue"])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.khls.filter((e=>e.tongCOD)).sort((function(e,t){return t.soLuong-e.soLuong})),(e=>((0,a.wg)(),(0,a.j4)(D,{key:e.senderPhone},{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.senderName),1)])),_:2},1024),(0,a.Wm)(w,{caption:"",lines:"2"},{default:(0,a.w5)((()=>[(0,a._)("a",{href:`tel:${e.senderPhone}`},(0,s.zw)(e.senderPhone),9,c)])),_:2},1024),(0,a.Wm)(w,{caption:"",lines:"2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.senderAdd),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(I,{side:"",top:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.soLuong),1)])),_:2},1024),(0,a.Wm)(w,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)("COD: "+(0,s.zw)(parseInt(e.tongCOD).toLocaleString()),1)])),_:2},1024),(0,a.Wm)(w,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)("Cước: "+(0,s.zw)(parseInt(e.tongCuoc).toLocaleString()),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,a.Wm)(f,{spaced:"",inset:""})])),_:2},1024)))),128))])}n(702);var p=n(9981),u=n.n(p),h=n(6827),m=n(4026);const g=(0,a.aZ)({components:{ListHeader:m.Z},name:"KHLPage",data(){return{searchText:"",tokenFe:"eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJKRmNhcC1XZWJBcGkiLCJleHAiOjE2NzkwMTQ0MTcsIm5iZiI6MTY3ODQwOTMxNywiaWF0IjoxNjc4NDA5MzE3LCJhaWQiOiJLSEwiLCJ1aWQiOiIxNDIwMTBfVEhBTUhUIiwidWZuIjoiSOG7kyBUaOG7iyBUaOG6r20iLCJvcmciOiIxNDIwMTAiLCJvcmdFbXBsIjoiMTQyMDEwIiwiZGlkIjoiZWRkNjJlZWFhZGVjYjBiNjM1NDI4ODY3YjJlZDEwMGIiLCJsY3AiOjE2MzU4MTY3NDIwMDAsImV4cGlyYXRpb25EYXRlIjo5MH0.snnuvZdWzP94_9baQfbJITD_OiGA2gyVl1EJiPVX7x-nL7ej2jGmnNWSt7-G7x4h32zxz4rLe9SZtJP3OzRFsw",dsDonHang:[],khls:[]}},methods:{sleep(){return new Promise((e=>setTimeout(e,1500)))},async login(){var e=JSON.stringify({username:"142010_THAMHT",password:"Abc@123456789",ip:"",random:.8677049060452371}),t={method:"post",maxBodyLength:1/0,url:"https://api-portalkhl.vnpost.vn/api/auth/signinKhl",headers:{capikey:"19001235","Content-Type":"application/json"},data:e};const{data:{tokenFe:n}}=await u().post("https://api-portalkhl.vnpost.vn/api/auth/signinKhl",e,t);this.tokenFe=n},async loadData(){this.tokenFe||await this.login();const[e,t,n]=(new Date).toISOString().slice(0,10).split("-");(new Date).toISOString().slice(0,10).split("-").reverse().join("/");var a=JSON.stringify({orgCode:"142010",tuNgay:[1,parseInt(t)-1,e].join("/"),denNgay:new Date(e,parseInt(t)-1,1).toISOString().slice(0,10).split("-").reverse().join("/"),pageNum:0,pageSize:500,sourceSystem:"KHL"}),o={method:"post",maxBodyLength:1/0,url:"https://api-portalkhl.vnpost.vn/khl/getItemDtl",headers:{Authorization:`Bearer ${this.tokenFe}`,"Content-Type":"application/json"},data:a};const{data:[s,i]}=await u()(o);this.dsDonHang=i;const r=new Map,l=i.map((({senderPhone:e,senderName:t,senderAdd:n})=>({senderPhone:e,senderName:t,senderAdd:n})));for(let c=0;c<l.length;c++){const e=l[c];if(!r.has(e.senderPhone)){const t=i.filter((t=>t.senderPhone===e.senderPhone));r.set(e.senderPhone,{...e,soLuong:t.length,tongCuoc:t.reduce(((e,{totalFeeSpecial:t})=>e+parseInt(t)),0),tongCOD:t.filter((e=>e.codAmount)).reduce(((e,{codAmount:t})=>e+parseInt(t)),0)})}}this.khls=[...r.values()]},async findItems(e){return this.dsDonHang.filter((t=>t.senderPhone===e))},async tongCuoc(e){return e.reduce(((e,{totalFeeSpecial:t})=>e+parseInt(t)),0)},async updateItem({ttNumber:e,senderPhone:t,totalFeeSpecial:n,codAmount:a,updatedDate:o,createdDate:s}){u().put(`https://192.168.1.7:2024/api/khls/${e}`,{soTien:n,ghiNo:a,ten:t,updatedDate:o.toString().slice(0,10),createdDate:s.toString().slice(0,10)})},copyTextToClipboard(e){navigator.clipboard.writeText(`Để theo dõi định vị bưu gửi https://www.hotham.vn/tra-cuu-hang-buu-dien?q=${e}. (Bạn chỉ cần bấm vào link)`).then((function(){h.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(e){h.Z.create({type:"negative",message:"Không thực hiện được!"+e})}))}},mounted(){this.loadData()}});var w=n(1639),I=n(361),k=n(2857),f=n(3246),D=n(490),y=n(1233),v=n(3115),T=n(2218),b=n(9984),Z=n.n(b);const O=(0,w.Z)(g,[["render",d]]),j=O;Z()(g,"components",{QInput:I.Z,QIcon:k.Z,QList:f.Z,QItem:D.Z,QItemSection:y.Z,QItemLabel:v.Z,QSeparator:T.Z})}}]);