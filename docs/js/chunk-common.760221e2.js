"use strict";(globalThis["webpackChunktodolist"]=globalThis["webpackChunktodolist"]||[]).push([[64],{4026:(t,e,a)=>{a.d(e,{Z:()=>r});var n=a(9835),h=a(6970);const i={class:"text-bold text-subtitle1"};function o(t,e,a,o,s,l){const c=(0,n.up)("q-banner");return(0,n.wg)(),(0,n.j4)(c,{dense:"","inline-actions":"",class:(0,h.C_)([a.bgcolor,"list-header text-white text-center"])},{default:(0,n.w5)((()=>[(0,n._)("span",i,[(0,n.WI)(t.$slots,"default")])])),_:3},8,["class"])}const s={props:["bgcolor"]};var l=a(1639),c=a(7128),g=a(9984),y=a.n(g);const m=(0,l.Z)(s,[["render",o]]),r=m;y()(s,"components",{QBanner:c.Z})},9235:(t,e,a)=>{a.d(e,{Z:()=>C});var n=a(9835),h=a(6970);const i=["href"],o=["href"],s=["href"],l=["href"],c=["href"],g=(0,n._)("br",null,null,-1),y=(0,n._)("br",null,null,-1),m=(0,n._)("br",null,null,-1),r=(0,n._)("br",null,null,-1);function u(t,e,a,u,T,p){const b=(0,n.up)("q-icon"),B=(0,n.up)("q-item-label"),d=(0,n.up)("q-item-section"),D=(0,n.up)("q-badge"),H=(0,n.up)("q-item");return(0,n.wg)(),(0,n.j4)(H,{class:(0,h.C_)({"bg-warning":a.bhyt.coTheUuTienCaoHon,"bg-warning":1==a.bhyt.coTheUuTienCaoHon,"bg-positive":p.getDateDiff(a.bhyt.denNgayDt)>30,"bg-blue-grey-3":p.getDateDiff(a.bhyt.denNgayDt)<1})},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{class:(0,h.C_)(1==a.bhyt.gioiTinh?"text-pink":"text-primary"),name:1==a.bhyt.gioiTinh?"female":"male"},null,8,["class","name"]),(0,n.Uk)((0,h.zw)(a.bhyt.hoTen||a.bhyt.hoVaTen)+" "+(0,h.zw)(a.bhyt.ngaySinhDt||a.bhyt.ngayThangNamSinh)+" ",1),(0,n.Wm)(b,{onClick:e[0]||(e[0]=t=>p.xacNhanLoaiBo(a.bhyt)),name:1==a.bhyt.disabled?"do_not_disturb_on":"delete_forever",color:1==a.bhyt.disabled?"red":"gray"},null,8,["name","color"]),(0,n.Wm)(b,{class:"q-ml-sm",onClick:e[1]||(e[1]=e=>t.xem(a.bhyt.soTheBhyt?a.bhyt.soTheBhyt:a.bhyt.maSoBhxh||a.bhyt.maSoBHXH)),name:"update",color:"blue"})])),_:1}),(0,n.Wm)(B,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,h.zw)(a.bhyt.diaChiLh),1)])),_:1}),(0,n.Wm)(B,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Mã hộ:"),(0,n._)("a",{target:"_blank",href:`/#/ho-gia-dinh/${a.bhyt.maHoGd}`},(0,h.zw)(a.bhyt.maHoGd),9,i),(0,n.Uk)(" "+(0,h.zw)(a.bhyt.mqhChuHo),1)])),_:1}),(0,n.Wm)(B,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Tờ khai:"),(0,n._)("a",{target:"_blank",href:`/#/ho-gia-dinh/${a.bhyt.uniqid}`},(0,h.zw)(a.bhyt.uniqid),9,o),(0,n._)("a",{target:"_blank",href:`https://app.hotham.vn/thanh-vien-ho-gia-dinh-by/${a.bhyt.uniqid}/pdf`},[(0,n.Wm)(b,{class:"q-ml-sm",name:"print",color:"blue"})],8,s)])),_:1}),(0,n.Wm)(B,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Số CMND: "+(0,h.zw)(a.bhyt.soCmnd),1)])),_:1}),(0,n.Wm)(B,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,h.zw)(a.bhyt.soTheBhyt?a.bhyt.soTheBhyt:a.bhyt.maSoBhxh||a.bhyt.maSoBHXH)+" ",1),(0,n.Wm)(b,{class:"q-ml-md",onClick:e[2]||(e[2]=t=>p.copyTextToClipboard(a.bhyt.soTheBhyt?a.bhyt.soTheBhyt:a.bhyt.maSoBhxh||a.bhyt.maSoBHXH)),name:"content_copy"}),(0,n.Wm)(b,{class:"q-ml-md",onClick:e[3]||(e[3]=t=>p.copyUrlToClipboard(a.bhyt)),name:"share"}),(0,n.Wm)(b,{class:"q-ml-md",onClick:e[4]||(e[4]=t=>p.copyMaTraCuuToClipboard(a.bhyt)),name:"history"}),(0,n.Wm)(b,{class:"q-ml-md",onClick:e[5]||(e[5]=t=>p.copyBHXHToClipboard(a.bhyt.maSoBhxh||a.bhyt.maSoBHXH)),name:"paid"})])),_:1}),(0,n.Wm)(B,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,h.zw)(a.bhyt.maKCB),1)])),_:1}),(0,n.Wm)(B,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)("5 năm:"+(0,h.zw)(a.bhyt.ngay5Nam||a.bhyt.trangThaiHoSoName||a.bhyt.moTa),1)])),_:1}),0!=a.bhyt.tienNop?((0,n.wg)(),(0,n.j4)(B,{key:0,caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n._)("span",{class:(0,h.C_)({"bg-red text-white text-bold q-pa-xs":p.getDateDiff(a.bhyt.denThangDt)<32})},[(0,n._)("strong",null,"BHXH "+(0,h.zw)(a.bhyt.maPhuongThucDong)+":",1),(0,n.Uk)(" "+(0,h.zw)(a.bhyt.mucDong)+" - "+(0,h.zw)(a.bhyt.denThangDt?.slice(0,7)),1)],2)])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(B,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,h.zw)(a.bhyt.ghiChu||"Ghi chú:")+" ",1),(0,n.Wm)(b,{onClick:e[6]||(e[6]=t=>p.xacNhanGhiChu(a.bhyt)),name:"edit"})])),_:1}),(0,n.Wm)(B,{caption:"",lines:"2"},{default:(0,n.w5)((()=>[a.bhyt.ngaySinhDt?((0,n.wg)(),(0,n.iD)("a",{key:0,href:`tel:${a.bhyt.soDienThoai2}`},(0,h.zw)(a.bhyt.soDienThoai2||"Thêm sđt:"),9,l)):(0,n.kq)("",!0),(0,n.Wm)(b,{onClick:e[7]||(e[7]=t=>p.xacNhanSoDienThoai2(a.bhyt)),name:"edit"})])),_:1}),a.bhyt.soDienThoai?((0,n.wg)(),(0,n.j4)(B,{key:1,caption:""},{default:(0,n.w5)((()=>[(0,n._)("a",{href:`tel:${a.bhyt.soDienThoai}`},(0,h.zw)(a.bhyt.soDienThoai),9,c),(0,n.Wm)(b,{class:"q-ml-md",onClick:e[8]||(e[8]=t=>p.copySDTToClipboard(a.bhyt.soDienThoai)),name:"content_copy"})])),_:1})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(d,{side:"",top:""},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,h.zw)(p.getDateDiff(a.bhyt.denNgayDt))+" ngày ",1),(0,n.Wm)(b,{onClick:e[9]||(e[9]=e=>t.xoaThanhVienHGD(a.bhyt.maSoBhxh)),name:"person_remove_alt_1"})])),_:1}),(0,n.Wm)(B,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)("Đến:"+(0,h.zw)(a.bhyt.denNgayDt||a.bhyt.ngayDenHan),1)])),_:1}),(0,n.Wm)(B,{caption:""},{default:(0,n.w5)((()=>[1==a.bhyt.isBHYT?((0,n.wg)(),(0,n.j4)(b,{key:0,class:"q-pr-sm",onClick:e[10]||(e[10]=t=>p.xacNhanHuyThu(a.bhyt,1)),name:"cancel"})):(0,n.kq)("",!0),(0,n._)("strong",{onClick:e[11]||(e[11]=t=>p.xacNhanGiaHan(a.bhyt)),class:"text-subtitle2 text-weight-bold"},(0,h.zw)(a.bhyt.tongTien||a.bhyt.soTienThu||a.bhyt.soPhaiDong?parseInt(a.bhyt.tongTien||a.bhyt.soTienThu||a.bhyt.soPhaiDong).toLocaleString():"0"),1),(0,n.Uk)("đ")])),_:1}),a.bhyt.tienNop?((0,n.wg)(),(0,n.j4)(B,{key:0,caption:""},{default:(0,n.w5)((()=>[1==a.bhyt.isBHXHTN?((0,n.wg)(),(0,n.j4)(b,{key:0,class:"q-pr-sm",onClick:e[12]||(e[12]=t=>p.xacNhanHuyThu(a.bhyt,0)),name:"cancel"})):(0,n.kq)("",!0),(0,n._)("strong",{class:"text-subtitle2 text-weight-bold",onClick:e[13]||(e[13]=t=>p.copyBHXHToClipboard(a.bhyt.maSoBhxh||a.bhyt.maSoBHXH))},(0,h.zw)(parseInt(a.bhyt.tienNop).toLocaleString()),1),(0,n.Uk)("đ")])),_:1})):(0,n.kq)("",!0),a.bhyt.mucDongBHYTBT?((0,n.wg)(),(0,n.j4)(B,{key:1,caption:""},{default:(0,n.w5)((()=>[(0,n._)("strong",{class:"text-subtitle2 text-weight-bold",onClick:e[14]||(e[14]=t=>p.xacNhanMucDongBHYTBT(a.bhyt))},(0,h.zw)(parseInt(a.bhyt.mucDongBHYTBT).toLocaleString())+"đ",1),g,a.bhyt.denNgayBHYTBT?((0,n.wg)(),(0,n.iD)("span",{key:0,class:(0,h.C_)({"bg-red text-white text-bold q-pa-xs":p.getDateDiff(a.bhyt.denNgayBHYTBT)<30}),onClick:e[15]||(e[15]=t=>p.xacNhanDenNgayBHYTBT(a.bhyt))},(0,h.zw)(new Date(a.bhyt.denNgayBHYTBT).toLocaleDateString()),3)):(0,n.kq)("",!0)])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(b,{onClick:e[16]||(e[16]=t=>p.xacNhanTheoDoi(a.bhyt)),name:"star",color:1==a.bhyt.completed?"yellow":"gray"},null,8,["color"]),(0,n.Wm)(B,{caption:""},{default:(0,n.w5)((()=>[a.bhyt.userName?((0,n.wg)(),(0,n.j4)(D,{key:0,class:"q-mr-sm",color:"gray"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,h.zw)(a.bhyt.userName),1)])),_:1})):(0,n.kq)("",!0),a.bhyt.soBienLai?((0,n.wg)(),(0,n.iD)("a",{key:1,href:"javascript:void(0);",onClick:e[17]||(e[17]=t=>p.timTheoSoBienLai(a.bhyt.soBienLai))},(0,h.zw)(a.bhyt.soBienLai),1)):(0,n.kq)("",!0),y,(0,n.Uk)(" "+(0,h.zw)(a.bhyt.ngayBienLai||a.bhyt.ngayLap),1)])),_:1}),a.bhyt.updated_at?((0,n.wg)(),(0,n.j4)(B,{key:2,caption:""},{default:(0,n.w5)((()=>[m,r,(0,n.Uk)(" "+(0,h.zw)(new Date(a.bhyt.updated_at).toLocaleString()),1)])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1},8,["class"])}var T=a(3100),p=a(4170),b=a(4328);const B={props:["bhyt"],computed:{...(0,T.rn)("auth",["userDetails"])},methods:{...(0,T.nv)("bhyts",["updateGhiChu","updateMaXacNhan","updateDenNgayBHYTBT","loaiBo","theoDoi","xem","getTraCuuThongTinBHXHTN","thuTien","xoaThanhVienHGD","getBhytsBySoBienLai","maTraCuu","huyThuTien","huyThuBHYT","huyThuBHXHTN","updateTongTien"]),timTheoSoBienLai(t){this.getBhytsBySoBienLai(t)},xacNhanLoaiBo(t){t.maSoBhxh||(t.maSoBhxh=t.maSoBHXH),this.$q.dialog({title:"Confirm",message:"Bạn có muốn loại bỏ?",ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((()=>{this.loaiBo(t)}))},xacNhanGhiChu(t){this.$q.dialog({title:"Ghi chú",message:"Nội dung ghi chú?",prompt:{model:t.ghiChu,type:"text"},cancel:!0,persistent:!0}).onOk((e=>{this.updateGhiChu({ghiChu:e,maSoBhxh:t.maSoBhxh||t.maSoBHXH})}))},xacNhanSoDienThoai2(t){this.$q.dialog({title:"Ghi chú",message:"Số điện thoại 2?",prompt:{model:t.soDienThoai2,type:"text"},cancel:!0,persistent:!0}).onOk((e=>{this.updateTongTien({maSoBhxh:t.maSoBhxh||t.maSoBHXH,capNhatBHYT:{soDienThoai2:e}})}))},xacNhanGiaHan(t){this.$q.dialog({title:"Gia hạn thẻ BHYT",message:"Mức đóng bảo hiểm",options:{type:"radio",model:t.tongTien,items:[{label:"T1: 972.000đ",value:"972000",color:"secondary"},{label:"T2: 680.400đ",value:"680400"},{label:"T3: 583.200đ",value:"583200"},{label:"T4: 486.000đ",value:"486000"},{label:"T5: 388.800đ",value:"388800"},{label:"Hủy thu",value:"0"}]},cancel:!0,persistent:!0}).onOk((e=>{"0"!==e?this.thuTien({tongTien:e,maSoBhxh:t.maSoBhxh||t.maSoBHXH,userName:this.userDetails.maNhanVienThu,maXa:this.userDetails.maXa}):this.huyThuTien({disabled:0,tongTien:0,isBHYT:0,maSoBhxh:t.maSoBhxh||t.maSoBHXH,userName:this.userDetails.id})}))},xacNhanMucDongBHYTBT(t){this.$q.dialog({title:"Thu bảo hiểm y tế bổ trợ",message:"Chọn gói BHYT bổ trợ:",options:{type:"radio",model:t.mucDongBHYTBT,items:[{label:"Gói mạnh khỏe: 106.000đ",value:"106000",color:"secondary"},{label:"Gói hạnh phúc: 169.000đ",value:"169000"},{label:"Hủy thu",value:"0"}]},cancel:!0,persistent:!0}).onOk((e=>{const{addToDate:a}=p["default"];this.updateTongTien({maSoBhxh:t.maSoBhxh||t.maSoBHXH,capNhatBHYT:{mucDongBHYTBT:e,maXa:this.userDetails.maXa,denNgayBHYTBT:"0"!==e?a(new Date,{months:12}).toISOString().slice(0,10):null,userName:this.userDetails.id}})}))},xacNhanDenNgayBHYTBT(t){this.$q.dialog({title:"Cập nhật ngày biên lai",message:"Ngày biên lai?",prompt:{model:t.denNgayBHYTBT.slice(0,10),isValid:t=>10==t.length,type:"text"},cancel:!0,persistent:!0}).onOk((e=>{this.updateDenNgayBHYTBT({denNgayBHYTBT:e,maSoBhxh:t.maSoBhxh||t.maSoBHXH,maXa:this.userDetails.maXa})}))},xacNhanTheoDoi(t){t.maSoBhxh||(t.maSoBhxh=t.maSoBHXH),this.$q.dialog({title:"Confirm",message:"Bạn có muốn theo dõi?",ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((()=>{this.theoDoi(t)}))},xacNhanHuyThu(t,e){t.maSoBhxh||(t.maSoBhxh=t.maSoBHXH),this.$q.dialog({title:"Confirm",message:`Bạn có muốn hủy thu tiền ${e?"BHYT":"BHXH tự nguyện"}?`,ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((()=>{e?this.huyThuBHYT({maSoBhxh:t.maSoBhxh}):this.huyThuBHXHTN({maSoBhxh:t.maSoBhxh})}))},getDateDiff(t){return t?p["default"].getDateDiff(new Date(t),new Date,"days"):""},async copyBHXHToClipboard(t){try{const e=await this.getTraCuuThongTinBHXHTN(t);if(0===Object.keys(e).length)return b.Z.create({type:"negative",message:"Không tham gia BHXH Tự Nguyện"}),null;navigator.clipboard.writeText(`Xin chào! Mã sổ BHXH: ${e.maSoBhxh}, Họ tên: ${e.hoTen}, Ngày sinh: **/**/${new Date(e.ngaySinhDt).toLocaleDateString()}; Tên đơn vị đang tham gia: Đại lý ${e.tenDonVi}, ngày đăng ký ${e.ngayDk} mức đóng ${parseInt(e.mucDong).toLocaleString()}đ (tiền ngân sách hỗ trợ ${parseInt(e.tienNsnnHoTro).toLocaleString()}đ). Đóng tiếp ${e.phuongThucDong} BHXH TN, tháng bắt đầu ${e.thangBd.slice(4)}/${e.thangBd.slice(0,4)} số tiền phải đóng ${parseInt(e.tienNop).toLocaleString()}đ.\r\n`+this.userDetails?.bhxhSMSText).then((function(){b.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){b.Z.create({type:"negative",message:"Không thực hiện được!"+t})})),this.$q.dialog({title:"Thu BHXH",message:`Mã sổ BHXH: ${e.maSoBhxh}, Họ tên: ${e.hoTen}, Ngày sinh: **/**/${new Date(e.ngaySinhDt).getFullYear()}; Tên đơn vị đang tham gia: Đại lý ${e.tenDonVi}, ngày đăng ký ${e.ngayDk} mức đóng ${parseInt(e.mucDong).toLocaleString()}đ (tiền ngân sách hỗ trợ ${parseInt(e.tienNsnnHoTro).toLocaleString()}đ). Đóng tiếp ${e.phuongThucDong} BHXH TN, tháng bắt đầu ${e.thangBd.slice(4)}/${e.thangBd.slice(0,4)} số tiền phải đóng ${parseInt(e.tienNop).toLocaleString()}đ.`,prompt:{model:e.tienNop.toLocaleString(),type:"text"},cancel:!0,persistent:!0}).onOk((e=>{this.thuTien({tienNop:e,maSoBhxh:t,userName:this.userDetails.maNhanVienThu})}))}catch(e){b.Z.create({type:"negative",message:"Không thực hiện được!"+e})}},async copyMaTraCuuToClipboard({bienLaiId:t,hoTen:e,maSoBhxh:a}){const{maXacNhan:n,ngayBienLai:h,soBienLai:i}=await this.maTraCuu(t);if(!n)return b.Z.create({type:"negative",message:"Không có mã xác nhận"}),null;const o=await this.updateMaXacNhan({maSoBhxh:a,maXacNhan:n,ngayLap:h.split("/").reverse().join("-")});navigator.clipboard.writeText(this.userDetails.xacNhanSMSText.replace("maXacNhan",n).replace("soBienLai",i).replace("ngayBienLai",h).replace("hoTen",e)).then((function(){b.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){b.Z.create({type:"negative",message:"Không thực hiện được!"+t})})),this.quaySoDienThoai(o.soDienThoai2||o.soDienThoai)},quaySoDienThoai(t){if(t){let e=document.createElement("a");e.href=`tel:${t}`,e.click()}},async copyUrlToClipboard(t){(!t.ngaySinhDt||!t.denNgayDt||p["default"].getDateDiff(new Date,new Date(t.denNgayDt),"days")<30)&&(t=await this.xem(t.soTheBhyt?t.soTheBhyt:t.maSoBhxh||t.maSoBHXH));const[e,a]=(new Date).toISOString().slice(0,7).split("-"),n=new Date(t.denNgayDt)<=new Date(e,parseInt(a)+1,0),h=`\n          Xin chào!\r\nMã thẻ: ${t.soTheBhyt?t.soTheBhyt:t.maSoBhxh||t.maSoBHXH}, Họ tên: ${t.hoTen||t.hoVaTen}, Ngày sinh: **/**/${new Date(t.ngaySinhDt).getFullYear()}; Hạn thẻ: ${new Date(t.tuNgayDt).toLocaleDateString()} - ${new Date(t.denNgayDt).toLocaleDateString()} (${this.getDateDiff(t.denNgayDt)} ngày); Thời điểm đủ 5 năm liên tục: ${t.ngay5Nam.slice(6,8)}/${t.ngay5Nam.slice(4,6)}/${t.ngay5Nam.slice(0,4)}.\n          `;navigator.clipboard.writeText(`${h}\r\n${n?this.userDetails.bhytHetHanSMSText.replace("_soTheBhyt",t.soTheBhyt?t.soTheBhyt:t.maSoBhxh||t.maSoBHXH):this.userDetails.bhytSMSText.replace("_soTheBhyt",t.soTheBhyt?t.soTheBhyt:t.maSoBhxh||t.maSoBHXH)}`).then((function(){b.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){b.Z.create({type:"negative",message:"Không thực hiện được!"+t})})),this.quaySoDienThoai(t.soDienThoai2||t.soDienThoai)},copyTextToClipboard(t){navigator.clipboard.writeText(t.toString().slice(t.length-10)).then((function(){b.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){b.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))},copySDTToClipboard(t){navigator.clipboard.writeText(t.toString().slice(t.length-10)).then((function(){b.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(t){b.Z.create({type:"negative",message:"Không thực hiện được!"+t})}))}},filters:{tien:function(t){return t?parseInt(t).toLocaleString():"0đ"}}};var d=a(1639),D=a(490),H=a(1233),S=a(3115),w=a(2857),x=a(990),k=a(9984),N=a.n(k);const f=(0,d.Z)(B,[["render",u]]),C=f;N()(B,"components",{QItem:D.Z,QItemSection:H.Z,QItemLabel:S.Z,QIcon:w.Z,QBadge:x.Z})}}]);